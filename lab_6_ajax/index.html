<!DOCTYPE html>
<html lang="en">

    <head>
        <title>Test AJAX page</title>
        <link rel="stylesheet" type="text/css" href="./lab_styles.css">
    </head>

    <body>
        <div class="container">
            <div class="wrapper">
                <div class="header">Test AJAX page</div>
                <button class="button" onclick="loadData()">Load Some JSON</button>
                <div class="content">
                    <ol class="instructions"></ol>
                </div>
                <div class="footer"></div>
            </div>
        </div>
        <script>

            function loadData() {
                const countries = document.querySelector('.instructions');
                countries.innerHTML="";
                fetch('ajax_sample.json')
                    .then(res => res.json())
                    .then(res => res.map(c => c.name + ", " + c.code))
                        .then(names =>
                        {
                        const numArray = [];
                        while(numArray.length < 15){
                            const selectNumber = getRandomIntInclusive(0, 242);
                            if(numArray.indexOf(selectNumber) == -1){
                                numArray.push(selectNumber);}
                                }
                            for (let x = 0; x < 15; x++){
                                var new_item = document.createElement('li'); 
                                var selected_country = names[numArray[x]];
                                new_item.innerText = selected_country;
                                countries.appendChild(new_item);
                }
            })
            function getRandomIntInclusive(min, max) {
                min = Math.ceil(min);
                max = Math.floor(max);
                return Math.floor(Math.random() * (max - min + 1)) + min; 
            }
            }
        </script>
    </body>

</html> 
 